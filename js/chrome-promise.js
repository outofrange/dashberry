!function(e,t){"function"==typeof define&&define.amd?define([],t.bind(null,"object"==typeof exports?this:e)):"object"==typeof exports?module.exports=t(this):e.ChromePromise=t(e)}(this,function(e){"use strict";function t(r){function i(e,t){return function(){var o=n.call(arguments);return new s(function(r,i){function c(){var e=a.lastError,t=n.call(arguments);if(e)i(e);else switch(t.length){case 0:r();break;case 1:r(t[0]);break;default:r(t)}}o.push(c),e.apply(t,o)})}}function c(e,n){for(var r in e)if(o.call(e,r)){var f=e[r],s=typeof f;"object"!==s||f instanceof t?n[r]="function"===s?i(f,e):f:(n[r]={},c(f,n[r]))}}var f=(r=r||{}).chrome||e.chrome,s=r.Promise||e.Promise,a=f.runtime;c(f,this)}var n=Array.prototype.slice,o=Object.prototype.hasOwnProperty;return t});